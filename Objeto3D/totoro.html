<!DOCTYPE HTML>
<html>

<head>
    <title> Color en WebGL 2.0</title>
    <meta charset="UTF-8">
</head>
<style>
    html,body{
        width: 100%;
        height: 100%;
        margin: 0px;
        border: 0;
        overflow: hidden;
        display: block;
    }
    #gui{
        position: absolute;
        top: 0;
        left: 0;
    }
</style>
<body>
    <canvas id="webglcanvas" width="500" height="500" style="border:none;"></canvas>

    <script id="vs" type="vertex">
        #version 300 es
        uniform mat4 uMatrizProyeccion;
        uniform mat4 uMatrizVista;
        uniform mat4 uMatrizModelo;
        layout(location = 0) in vec3 aVertices;
        layout(location = 1) in vec4 aColores;
        out vec4 vColores;
        void main() {
            vColores = aColores;
            gl_Position = uMatrizProyeccion * uMatrizVista * uMatrizModelo * vec4(aVertices, 1.0);
        }
    </script>

    <script id="fs" type="fragment">
        #version 300 es
        precision highp float;
        in vec4 vColores;
        out vec4 color;
        void main() {
            color = vColores;
        }
    </script>

    <script>
        "use strict";

        // Matriz identidad
        function identidad(r) {
            r[0] = 1; r[4] = 0; r[8] = 0; r[12] = 0;
            r[1] = 0; r[5] = 1; r[9] = 0; r[13] = 0;
            r[2] = 0; r[6] = 0; r[10] = 1; r[14] = 0;
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
        }

        function multiplica(c, a, b) {
            let r = new Array(16);
            for (let i = 0; i < 4; i++) {
                for (let j = 0; j < 4; j++) {
                    let s = 0;
                    for (let k = 0; k < 4; k++)
                        s += a[i + k * 4] * b[k + j * 4];
                    r[i + j * 4] = s;
                }
            }
            for (let i = 0; i < 16; i++) c[i] = r[i];
        }

        function rotacionX(m, theta) {
            let r = new Array(16);
            let c = Math.cos(theta);
            let s = Math.sin(theta);
            r[0] = 1; r[4] = 0; r[8] = 0; r[12] = 0;
            r[1] = 0; r[5] = c; r[9] = -s; r[13] = 0;
            r[2] = 0; r[6] = s; r[10] = c; r[14] = 0;
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
            multiplica(m, m, r);
        }

        function rotacionY(m, theta) {
            let r = new Array(16);
            let c = Math.cos(theta);
            let s = Math.sin(theta);
            r[0] = c; r[4] = 0; r[8] = s; r[12] = 0;
            r[1] = 0; r[5] = 1; r[9] = 0; r[13] = 0;
            r[2] = -s; r[6] = 0; r[10] = c; r[14] = 0;
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
            multiplica(m, m, r);
        }

        function rotacionZ(m, theta) {
            let r = new Array(16);
            let c = Math.cos(theta);
            let s = Math.sin(theta);
            r[0] = c; r[4] = -s; r[8] = 0; r[12] = 0;
            r[1] = s; r[5] = c; r[9] = 0; r[13] = 0;
            r[2] = 0; r[6] = 0; r[10] = 1; r[14] = 0;
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
            multiplica(m, m, r);
        }

        function ortho(r, izq, der, abj, arr, cerca, lejos) {
            r[0] = 2 / (der - izq); r[4] = 0; r[8] = 0; r[12] = -(der + izq) / (der - izq);
            r[1] = 0; r[5] = 2 / (arr - abj); r[9] = 0; r[13] = -(arr + abj) / (arr - abj);
            r[2] = 0; r[6] = 0; r[10] = -2 / (lejos - cerca); r[14] = -(lejos + cerca) / (lejos - cerca);
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
        }
        /* Traslación - glTranslatef */
        function traslacion(matriz, tx, ty, tz) {
            let r = new Array(16);
            r[0] = 1; r[4] = 0; r[8] = 0; r[12] = tx;
            r[1] = 0; r[5] = 1; r[9] = 0; r[13] = ty;
            r[2] = 0; r[6] = 0; r[10] = 1; r[14] = tz;
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
            multiplica(matriz, matriz, r);
        }

        /* Escalación - glScalef */
        function escalacion(matriz, sx, sy, sz) {
            let r = new Array(16);
            r[0] = sx; r[4] = 0; r[8] = 0; r[12] = 0;
            r[1] = 0; r[5] = sy; r[9] = 0; r[13] = 0;
            r[2] = 0; r[6] = 0; r[10] = sz; r[14] = 0;
            r[3] = 0; r[7] = 0; r[11] = 0; r[15] = 1;
            multiplica(matriz, matriz, r);
        }
        let gl, programaID, dodecaedroVAO, brazo1VAO, brazo2VAO, bocaVAO, estomagoVAO, ojosVAO, orejaVAO, narizVAO, colaVAO;

        let uMatrizProyeccion, uMatrizVista, uMatrizModelo;
        let MatrizProyeccion = new Array(16);
        let MatrizVista = new Array(16);
        let MatrizModelo = new Array(16);

        let rotX = 0, rotY = 0, rotZ = 0;


        const verticesb = [
            1.2, -0.5, 0.0,   // 0
            0.55, 0.40, 0.00,  // 1
            0.55, 0.15, 0.3, // 2
            0.55, -0.15, 0.3, // 3
            0.55, -0.40, 0.00,  // 4
            0.55, -0.15, -0.3, // 5
            0.55, 0.15, -0.3  // 6
        ];

        const coloresb = [
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0
        ];
        const indicesb = [
            0, 1, 2,
            0, 2, 3,
            0, 3, 4,
            0, 4, 5,
            0, 5, 6,
            0, 6, 1,
            1, 2, 3,
            1, 3, 4,
            1, 4, 5,
            1, 5, 6
        ];

        const verticesb2 = [
            -1.2, -0.5, 0.0,   // 0 
            -0.55, 0.40, 0.00,  // 1
            -0.55, 0.15, 0.3,  // 2
            -0.55, -0.15, 0.3, // 3
            -0.55, -0.40, 0.00,  // 4
            -0.55, -0.15, -0.3, // 5
            -0.55, 0.15, -0.3   // 6
        ];

        const coloresb2 = [
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0
        ];

        const indicesb2 = [
            0, 1, 2,
            0, 2, 3,
            0, 3, 4,
            0, 4, 5,
            0, 5, 6,
            0, 6, 1,
            1, 2, 3,
            1, 3, 4,
            1, 4, 5,
            1, 5, 6
        ];
        const verticesoreja = [
            0.0, -0.5, 0.0,  // 0
            0.5, 0.5, 0.0,  // 1
            0.25, 0.5, 0.43, // 2
            -0.25, 0.5, 0.43, // 3
            -0.5, 0.5, 0.0,  // 4
            -0.25, 0.5, -0.43, // 5
            0.25, 0.5, -0.43  // 6
        ];

        const coloresoreja = [
            0.6, 0.6, 0.6, 1.0, // pico
            0.6, 0.6, 0.6, 1.0, // base 1
            0.6, 0.6, 0.6, 1.0, // base 2
            0.6, 0.6, 0.6, 1.0, // base 3
            0.6, 0.6, 0.6, 1.0, // base 4
            0.6, 0.6, 0.6, 1.0, // base 5
            0.6, 0.6, 0.6, 1.0  // base 6
        ];

        // Índices se mantienen igual
        const indicesoreja = [
            0, 1, 2,
            0, 2, 3,
            0, 3, 4,
            0, 4, 5,
            0, 5, 6,
            0, 6, 1,
            1, 2, 3,
            1, 3, 4,
            1, 4, 5,
            1, 5, 6
        ];

        const vertices = [
            0.1, 1.25, 0.1,
            0.35, 1.18, 0.00, 0.25, 1.18, 0.25,
            0.00, 1.18, 0.35, -0.25, 1.18, 0.25,
            -0.35, 1.18, 0.00, -0.25, 1.18, -0.25,
            0.00, 1.18, -0.35, 0.25, 1.18, -0.25,

            // Nivel 2
            0.56, 1.00, 0.00, 0.39, 1.00, 0.39,
            0.00, 1.00, 0.56, -0.39, 1.00, 0.39,
            -0.56, 1.00, 0.00, -0.39, 1.00, -0.39,
            0.00, 1.00, -0.56, 0.39, 1.00, -0.39,

            // Nivel 3 (ampliado uniformemente)
            0.77, 0.80, 0.00, 0.53, 0.80, 0.53,
            0.00, 0.80, 0.77, -0.53, 0.80, 0.53,
            -0.77, 0.80, 0.00, -0.53, 0.80, -0.53,
            0.00, 0.80, -0.77, 0.53, 0.80, -0.53,

            // Nivel 4 (máximo ancho)
            0.85, 0.35, 0.00, 0.60, 0.35, 0.60,
            0.00, 0.35, 0.85, -0.60, 0.35, 0.60,
            -0.85, 0.35, 0.00, -0.60, 0.35, -0.60,
            0.00, 0.35, -0.85, 0.60, 0.35, -0.60,

            // Nivel 5 (ligeramente más bajo)
            0.75, 0.00, 0.00, 0.53, 0.00, 0.53,
            0.00, 0.00, 0.75, -0.53, 0.00, 0.53,
            -0.75, 0.00, 0.00, -0.53, 0.00, -0.53,
            0.00, 0.00, -0.75, 0.53, 0.00, -0.53,

            // Nivel 6
            0.65, -0.35, 0.05, 0.45, -0.35, 0.45,
            0.05, -0.35, 0.65, -0.45, -0.35, 0.45,
            -0.65, -0.35, 0.05, -0.45, -0.35, -0.45,
            0.05, -0.35, -0.65, 0.45, -0.35, -0.45,

            // Nivel 7
            0.50, -0.60, 0.05, 0.35, -0.60, 0.35,
            0.05, -0.60, 0.50, -0.35, -0.60, 0.35,
            -0.50, -0.60, 0.05, -0.35, -0.60, -0.35,
            0.05, -0.60, -0.50, 0.35, -0.60, -0.35,

            // Nivel 8 (base)
            0.35, -0.90, 0.05, 0.25, -0.90, 0.25,
            0.05, -0.90, 0.35, -0.25, -0.90, 0.25,
            -0.35, -0.90, 0.05, -0.25, -0.90, -0.25,
            0.05, -0.90, -0.35, 0.25, -0.90, -0.25,

            // Fondo
            0.0, -1.05, 0.0
        ];

        const indices = [
            // --- punta superior 
            0, 1, 2, 0, 2, 3, 0, 3, 4, 0, 4, 5, 0, 5, 6, 0, 6, 7, 0, 7, 8, 0, 8, 1,
            1, 2, 3, 1, 3, 4, 1, 4, 5, 1, 5, 6, 1, 6, 7, 1, 7, 8, 1, 8, 2, // triángulos extra punta
            // --- zona 1: cabeza superior ---
            1, 9, 2, 2, 9, 10, 2, 10, 3, 3, 10, 11, 3, 11, 4, 4, 11, 12, 4, 12, 5, 5, 12, 13,
            5, 13, 6, 6, 13, 14, 6, 14, 7, 7, 14, 15, 7, 15, 8, 8, 15, 16, 8, 16, 1, 1, 16, 9,

            // --- zona 2: transición cabeza-cuerpo ---
            9, 17, 10, 10, 17, 18, 10, 18, 11, 11, 18, 19, 11, 19, 12, 12, 19, 20, 12, 20, 13, 13, 20, 21,
            13, 21, 14, 14, 21, 22, 14, 22, 15, 15, 22, 23, 15, 23, 16, 16, 23, 24, 16, 24, 9, 9, 24, 17,

            // --- zona 3: zona media superior ---
            17, 25, 18, 18, 25, 26, 18, 26, 19, 19, 26, 27, 19, 27, 20, 20, 27, 28, 20, 28, 21, 21, 28, 29,
            21, 29, 22, 22, 29, 30, 22, 30, 23, 23, 30, 31, 23, 31, 24, 24, 31, 32, 24, 32, 17, 17, 32, 25,

            // --- zona 4: zona alta del cuerpo ---
            25, 33, 26, 26, 33, 34, 26, 34, 27, 27, 34, 35, 27, 35, 28, 28, 35, 36, 28, 36, 29, 29, 36, 37,
            29, 37, 30, 30, 37, 38, 30, 38, 31, 31, 38, 39, 31, 39, 32, 32, 39, 40, 32, 40, 25, 25, 40, 33,

            // --- zona 5: zona media ---
            33, 41, 34, 34, 41, 42, 34, 42, 35, 35, 42, 43, 35, 43, 36, 36, 43, 44, 36, 44, 37, 37, 44, 45,
            37, 45, 38, 38, 45, 46, 38, 46, 39, 39, 46, 47, 39, 47, 40, 40, 47, 48, 40, 48, 33, 33, 48, 41,

            // --- zona 6: zona baja ---
            41, 49, 42, 42, 49, 50, 42, 50, 43, 43, 50, 51, 43, 51, 44, 44, 51, 52, 44, 52, 45, 45, 52, 53,
            45, 53, 46, 46, 53, 54, 46, 54, 47, 47, 54, 55, 47, 55, 48, 48, 55, 56, 48, 56, 41, 41, 56, 49,

            // --- zona 7: base inferior ---
            49, 57, 50, 50, 57, 58, 50, 58, 51, 51, 58, 59, 51, 59, 52, 52, 59, 60, 52, 60, 53, 53, 60, 61,
            53, 61, 54, 54, 61, 62, 54, 62, 55, 55, 62, 63, 55, 63, 56, 56, 63, 64, 56, 64, 49, 49, 64, 57,

            // --- zona 8: cerrar base (nivel 8 → fondo) ---
            57, 58, 65, 58, 59, 65, 59, 60, 65, 60, 61, 65, 61, 62, 65, 62, 63, 65, 63, 64, 65, 64, 57, 65
        ];



        const colores = [
            ...Array(vertices.length / 3).fill([0.6, 0.6, 0.6, 1.0]).flat(),
            ...Array(2).fill([1.0, 1.0, 1.0, 1.0]).flat(),
            ...Array(2).fill([1.0, 1.0, 1.0, 1.0]).flat(),
            ...Array(vertices.length / 3 - 4).fill([0.6, 0.6, 0.6, 1.0]).flat()
        ];


        const verticesBoca = [
            -0.3, -0.9, 0.4,  // izquierda
            0.3, -0.9, 0.4   // derecha  
        ];
        const indicesBoca = [0, 1, 2, 0, 2, 3];
        const coloresBoca = [
            0, 0, 0, 1,  // rojo
            0, 0, 0, 1
        ];
        const verticese = [
            -1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1,
            1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1,
            0, -0.61803398875, -1.61803398875,
            0, -0.61803398875, 1.61803398875,
            0, 0.61803398875, -1.61803398875,
            0, 0.61803398875, 1.61803398875,
            -0.61803398875, -1.61803398875, 0,
            -0.61803398875, 1.61803398875, 0,
            0.61803398875, -1.61803398875, 0,
            0.61803398875, 1.61803398875, 0,
            -1.61803398875, 0, -0.61803398875,
            1.61803398875, 0, -0.61803398875,
            -1.61803398875, 0, 0.61803398875,
            1.61803398875, 0, 0.61803398875
        ];

        const indicese = [
            3, 11, 7, 3, 7, 15, 3, 15, 13,
            7, 19, 17, 7, 17, 6, 7, 6, 15,
            17, 4, 8, 17, 8, 10, 17, 10, 6,
            8, 0, 16, 8, 16, 2, 8, 2, 10,
            0, 12, 1, 0, 1, 18, 0, 18, 16,
            6, 10, 2, 6, 2, 13, 6, 13, 15,
            2, 16, 18, 2, 18, 3, 2, 3, 13,
            18, 1, 9, 18, 9, 11, 18, 11, 3,
            4, 14, 12, 4, 12, 0, 4, 0, 8,
            11, 9, 5, 11, 5, 19, 11, 19, 7,
            19, 5, 14, 19, 14, 4, 19, 4, 17,
            1, 12, 14, 1, 14, 5, 1, 5, 9
        ];
        const colorese = [
            // Triángulo 0
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 1
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 2
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 3
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 4
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 5
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 6
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 7
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 8
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 9
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 10
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1,
            // Triángulo 11
            1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1
        ];

        const verticesojos = [
            -1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1,
            1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1,
            0, -0.61803398875, -1.61803398875,
            0, -0.61803398875, 1.61803398875,
            0, 0.61803398875, -1.61803398875,
            0, 0.61803398875, 1.61803398875,
            -0.61803398875, -1.61803398875, 0,
            -0.61803398875, 1.61803398875, 0,
            0.61803398875, -1.61803398875, 0,
            0.61803398875, 1.61803398875, 0,
            -1.61803398875, 0, -0.61803398875,
            1.61803398875, 0, -0.61803398875,
            -1.61803398875, 0, 0.61803398875,
            1.61803398875, 0, 0.61803398875
        ];

        const indicesojos = [
            3, 11, 7, 3, 7, 15, 3, 15, 13,
            7, 19, 17, 7, 17, 6, 7, 6, 15,
            17, 4, 8, 17, 8, 10, 17, 10, 6,
            8, 0, 16, 8, 16, 2, 8, 2, 10,
            0, 12, 1, 0, 1, 18, 0, 18, 16,
            6, 10, 2, 6, 2, 13, 6, 13, 15,
            2, 16, 18, 2, 18, 3, 2, 3, 13,
            18, 1, 9, 18, 9, 11, 18, 11, 3,
            4, 14, 12, 4, 12, 0, 4, 0, 8,
            11, 9, 5, 11, 5, 19, 11, 19, 7,
            19, 5, 14, 19, 14, 4, 19, 4, 17,
            1, 12, 14, 1, 14, 5, 1, 5, 9
        ];
        const coloresojos = [
            // Triángulo 0
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 1
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 2
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 3
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 4
            0, 0, 0, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 5
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 6
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 7
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 8
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 9
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 10
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1,
            // Triángulo 11
            1, 1, 1, 1,
            1, 1, 1, 1,
            1, 1, 1, 1
        ];
        const coloresnariz = [
            // Triángulo 0
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 1
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 2
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 3
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 4
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 5
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 6
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 7
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 8
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 9
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 10
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
            // Triángulo 11
            0, 0, 0, 1,
            0, 0, 0, 1,
            0, 0, 0, 1,
        ];

         const coloresCola = [
            // Triángulo 0
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 1
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 2
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 3
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 4
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 5
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 6
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 7
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 8
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 9
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 10
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            // Triángulo 11
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
            0.6, 0.6, 0.6, 1.0,
        ];
        function dibuja() {
            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
            //cuerpo
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(dodecaedroVAO);
            gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);

            //Brazo derecho
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 1, 1.0, 1.0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(brazo1VAO);
            gl.drawElements(gl.TRIANGLES, indicesb.length, gl.UNSIGNED_SHORT, 0);
            //  BRAZO izquierdo
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 1, 1.0, 1.0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(brazo2VAO);
            gl.drawElements(gl.TRIANGLES, indicesb2.length, gl.UNSIGNED_SHORT, 0);

            //  oreja 1
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 0.3, 0.5, 0.5);
            traslacion(MatrizModelo, -0.5, -2, 0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(orejaVAO);
            gl.drawElements(gl.TRIANGLES, indicesoreja.length, gl.UNSIGNED_SHORT, 0);


            //  oreja 2
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 0.3, 0.5, 0.5);
            traslacion(MatrizModelo, 0.5, -2, 0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(orejaVAO);
            gl.drawElements(gl.TRIANGLES, indicesoreja.length, gl.UNSIGNED_SHORT, 0);

            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            traslacion(MatrizModelo, 0.4, 0.5, 0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(bocaVAO);
            gl.drawArrays(gl.LINE_STRIP, 0, verticesBoca.length / 3);

            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            traslacion(MatrizModelo, 0.4, 0.6, 0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(bocaVAO);
            gl.drawArrays(gl.LINE_STRIP, 0, verticesBoca.length / 3);

            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            traslacion(MatrizModelo, -0.4, 0.5, 0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(bocaVAO);
            gl.drawArrays(gl.LINE_STRIP, 0, verticesBoca.length / 3);

            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            traslacion(MatrizModelo, -0.4, 0.6, 0);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(bocaVAO);
            gl.drawArrays(gl.LINE_STRIP, 0, verticesBoca.length / 3);

            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 0.4, 0.4, 0.4);
            traslacion(MatrizModelo, 0, 0.6, 1);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(estomagoVAO);
            gl.drawElements(gl.TRIANGLES, indicese.length, gl.UNSIGNED_SHORT, 0);

            //ojos
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 0.09, 0.09, 0.12);
            traslacion(MatrizModelo, 2, -6, 3);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(ojosVAO);
            gl.drawElements(gl.TRIANGLES, indicesojos.length, gl.UNSIGNED_SHORT, 0);

            //ojos
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 0.09, 0.09, 0.12);
            traslacion(MatrizModelo, -2, -6, 3);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(ojosVAO);
            gl.drawElements(gl.TRIANGLES, indicesojos.length, gl.UNSIGNED_SHORT, 0);

            //nariz
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
            escalacion(MatrizModelo, 0.1, 0.12, 0.12);
            traslacion(MatrizModelo, 0, -3, 3.5);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(narizVAO);
            gl.drawElements(gl.TRIANGLES, indicesojos.length, gl.UNSIGNED_SHORT, 0);

             //nariz
            identidad(MatrizModelo);
            rotacionX(MatrizModelo, rotX);
            rotacionY(MatrizModelo, rotY);
            rotacionZ(MatrizModelo, rotZ);
             escalacion(MatrizModelo, 0.2, 0.2, 0.2);
            traslacion(MatrizModelo, 0, 3, -4);
            gl.uniformMatrix4fv(uMatrizModelo, false, MatrizModelo);
            gl.bindVertexArray(colaVAO);
            gl.drawElements(gl.TRIANGLES, indicesojos.length, gl.UNSIGNED_SHORT, 0);


            gl.bindVertexArray(null);

            rotX += 0.01;
            rotY += 0.01;
            rotZ += 0.01;

            requestAnimationFrame(dibuja);
        }

        function main() {
            const canvas = document.getElementById("webglcanvas");
            gl = canvas.getContext("webgl2");
            canvas.width=window.innerWidth;
            canvas.height=window.innerHeight;
            if (!gl) { alert("WebGL 2.0 no disponible"); return; }

            gl.viewport(0, 0, canvas.width, canvas.height);
            gl.enable(gl.DEPTH_TEST);

            // Shaders
            const vs = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vs, document.getElementById("vs").text.trim());
            gl.compileShader(vs);

            const fs = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fs, document.getElementById("fs").text.trim());
            gl.compileShader(fs);

            programaID = gl.createProgram();
            gl.attachShader(programaID, vs);
            gl.attachShader(programaID, fs);
            gl.linkProgram(programaID);
            gl.useProgram(programaID);

            uMatrizProyeccion = gl.getUniformLocation(programaID, "uMatrizProyeccion");
            uMatrizVista = gl.getUniformLocation(programaID, "uMatrizVista");
            uMatrizModelo = gl.getUniformLocation(programaID, "uMatrizModelo");

            // Matrices
            identidad(MatrizVista);
            identidad(MatrizModelo);
            ortho(MatrizProyeccion, -5*gl.canvas.width/gl.canvas.height, 5*canvas.width/gl.canvas.height, -5, 5, -5, 5);
            gl.uniformMatrix4fv(uMatrizProyeccion, false, MatrizProyeccion);
            gl.uniformMatrix4fv(uMatrizVista, false, MatrizVista);


            ojosVAO = gl.createVertexArray();
            gl.bindVertexArray(ojosVAO);
            const vboVerticesOjos = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVerticesOjos);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesojos), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColoresOjos = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColoresOjos);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresojos), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const eboOjos = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, eboOjos);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesojos), gl.STATIC_DRAW);


            narizVAO = gl.createVertexArray();
            gl.bindVertexArray(narizVAO);
            const vboVerticesNariz = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVerticesNariz);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesojos), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const eboNariz = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, eboNariz);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesojos), gl.STATIC_DRAW);
            const vboColoresnariz = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColoresnariz);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresnariz), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);

            colaVAO = gl.createVertexArray();
            gl.bindVertexArray(colaVAO);
            const vboVerticesCola = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVerticesCola);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesojos), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const eboCola = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, eboCola);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesojos), gl.STATIC_DRAW);
            const vboColorescola = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColorescola);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresCola), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);


            estomagoVAO = gl.createVertexArray();
            gl.bindVertexArray(estomagoVAO);
            const vboVerticesEstomago = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVerticesEstomago);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticese), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColoresEstomago = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColoresEstomago);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colorese), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const eboEstomago = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, eboEstomago);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicese), gl.STATIC_DRAW);

            brazo1VAO = gl.createVertexArray();
            gl.bindVertexArray(brazo1VAO);
            const vboVertices2 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVertices2);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesb), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColores2 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColores2);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresb), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const ebo2 = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ebo2);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesb), gl.STATIC_DRAW);


            brazo2VAO = gl.createVertexArray();
            gl.bindVertexArray(brazo2VAO);
            const vboVertices4 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVertices4);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesb2), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColores4 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColores4);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresb2), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const ebo4 = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ebo4);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesb2), gl.STATIC_DRAW);

            orejaVAO = gl.createVertexArray();
            gl.bindVertexArray(orejaVAO);
            const vboVertices5 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVertices5);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesoreja), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColores5 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColores5);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresoreja), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const ebo5 = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ebo5);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesoreja), gl.STATIC_DRAW);


            // VAO
            bocaVAO = gl.createVertexArray();
            gl.bindVertexArray(bocaVAO);
            const vboVertices3 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVertices3);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(verticesBoca), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColores3 = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColores3);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(coloresBoca), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const ebo3 = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ebo3);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indicesBoca), gl.STATIC_DRAW);


            // VAO
            dodecaedroVAO = gl.createVertexArray();
            gl.bindVertexArray(dodecaedroVAO);
            const vboVertices = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboVertices);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
            gl.vertexAttribPointer(0, 3, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(0);
            const vboColores = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vboColores);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colores), gl.STATIC_DRAW);
            gl.vertexAttribPointer(1, 4, gl.FLOAT, false, 0, 0);
            gl.enableVertexAttribArray(1);
            const ebo = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ebo);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);


            gl.bindVertexArray(null);

            gl.clearColor(0.1, 0.1, 0.1, 1.0);
            dibuja();
        }

        main();
    </script>
</body>

</html>